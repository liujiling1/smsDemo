<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:include="base/header :: head_template">
</head>
<link th:href="@{/css/plugins/webuploader/webuploader.css}" rel="stylesheet" />

<body class="gray-bg">
    <div class="wrapper wrapper-content animated ">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>版本管理</h5>
                    </div>
                    <div class="ibox-content">
                        <form class="form-horizontal m-t" action="/edition/modifyEdition" method="post" id="commentForm" novalidate="novalidate">
                            <div class="form-group">
                              <input type="hidden" name="id" id="eId" th:value="${edition.id != null ? edition.id : 0}">
                                <label class="col-sm-3 control-label">*发布终端：</label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="ua" id = "ua" required="required">
                                            <option value="android"  th:selected="${edition.ua=='android'}" >android</option>
                                           <!--  <option value="ios" ${edition.ua=='ios' ? "selected" : ""}>ios</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
									<label class="control-label col-sm-3">*平台：</label>
									<div class="col-sm-8">
		                                <select class="form-control" name="busiType">
											<option value="1" th:selected="${edition.busiType==1}">货主</option>
											<option value="2" th:selected="${edition.busiType==2}">船主</option>
										</select>
									 </div>
	                        </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">*版本名称：</label>
                                <div class="col-sm-8">
                                   <input name="versionName" id = "versionName" th:value="${edition.versionName}" maxlength="30" required="required" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label">*版本号：</label>
                                <div class="col-sm-8">
                                    <input type="text" required="required" th:value="${edition.versionCode}" name="versionCode"  placeholder="例如：1.0" class="form-control ">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label">*更新内容：</label>
                                <div class="col-sm-8" id = "tearea">
                                	<textarea name="versionDesc" rows="10" maxlength="200" placeholder="200字内" required="required" class="form-control" th:text="${edition.versionDesc}" ></textarea>
		                        </div>
                            </div>
							<div class="form-group">
                                <label class="col-sm-3 control-label">*是否强制更新：</label>
                                <div class="col-sm-8">
                                    <select class="form-control" name="forceUpdate" id = "forceUpdate" required="required">
                                            <option value="0" th:selected="${edition.forceUpdate ==0 }">否</option>
                                            <option value="1" th:selected="${edition.forceUpdate ==1 }">是</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                            	<input type="hidden" id="show_pic" th:value="${edition.showDownloadUrl}" />
                                <label class="col-sm-3 control-label">*安装包：</label>
                                <div id="doc" class="uploader col-sm-8">
								<span class="u_file_span">
								<input type="text" class="u_file" required name="downloadUrl" th:value="${edition.downloadUrl }" />
								</span>
                                </div>
                            </div>

                            
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-3">
                                    <button class="btn btn-s-m btn-info" type="submit" id = "subButton">保存</button>
                                    <button class="btn btn-s-m btn-white" type="button" onclick="window.location.href=ys.path+'/edition/index';">返回列表</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page-Level Scripts -->
    <script src="/js/plugins/webuploader/webuploader.js"></script>
    <script src="/js/plugins/webuploader/webuploader.ys.js"></script>
    <script>
        $(document).ready(function () {
            $("#doc").ysUploader({
                uploadConf : {
                    fileSingleSizeLimit : 100 * 1024 * 1024,
                    pickLabel : '安装包',
                    folder: "app",
                    accept:{
                        extensions: 'apk'
                    },
                },
                uploadSuccess : function(file,data){
                    $("#commentForm").find("input[name='downloadUrl']").val(data.data[0].path);
                },
                noView : true,
                data:[$("#show_pic").val()]
            });


        });

    </script>

    
    

</body>

</html>
